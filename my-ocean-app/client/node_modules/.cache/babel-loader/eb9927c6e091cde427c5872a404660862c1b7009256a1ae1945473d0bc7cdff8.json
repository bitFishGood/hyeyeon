{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kim22\\\\Downloads\\\\my-ocean-app\\\\client\\\\src\\\\components\\\\MiniGame.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function MiniGame({\n  token\n}) {\n  _s();\n  const [score, setScore] = useState(0);\n  const [timeLeft, setTimeLeft] = useState(10);\n  const [gameActive, setGameActive] = useState(false);\n  const targetRef = useRef(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    let moveInterval;\n    let timerInterval;\n    if (gameActive && timeLeft > 0) {\n      // Move target every 800ms\n      moveInterval = setInterval(() => {\n        moveTarget();\n      }, 800);\n      // Countdown timer\n      timerInterval = setInterval(() => {\n        setTimeLeft(prev => prev > 0 ? prev - 1 : 0);\n      }, 1000);\n    }\n    if (timeLeft === 0) {\n      // Game over\n      clearInterval(moveInterval);\n      clearInterval(timerInterval);\n      // If score high enough, reward item\n      if (score >= 5) {\n        fetch('/api/items', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          },\n          body: JSON.stringify({\n            name: 'Shell'\n          })\n        }).then(res => res.json()).then(data => {\n          alert('축하합니다! 새로운 아이템을 획득했습니다!');\n        }).catch(err => console.error('Item reward error:', err));\n      } else {\n        alert('다음 기회에...');\n      }\n    }\n    return () => {\n      clearInterval(moveInterval);\n      clearInterval(timerInterval);\n    };\n  }, [gameActive, timeLeft]);\n  const startGame = () => {\n    setScore(0);\n    setTimeLeft(10);\n    setGameActive(true);\n    moveTarget();\n  };\n  const moveTarget = () => {\n    if (targetRef.current) {\n      const container = targetRef.current.parentElement;\n      const maxX = container.offsetWidth - 50; // target size 50px\n      const maxY = container.offsetHeight - 50;\n      const newX = Math.floor(Math.random() * maxX);\n      const newY = Math.floor(Math.random() * maxY);\n      targetRef.current.style.left = newX + 'px';\n      targetRef.current.style.top = newY + 'px';\n    }\n  };\n  const handleClickTarget = () => {\n    if (!gameActive) return;\n    setScore(prev => prev + 1);\n    // move target immediately on click for faster gameplay\n    moveTarget();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mini-game-container\",\n    style: {\n      position: 'relative',\n      width: '100%',\n      height: '100%',\n      background: '#eef',\n      textAlign: 'center'\n    },\n    children: [!gameActive && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '100px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uBBF8\\uB2C8\\uAC8C\\uC784 \\uC2DC\\uC791\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"10\\uCD08 \\uC548\\uC5D0 \\uAC00\\uB2A5\\uD55C \\uB9CE\\uC774 \\uD074\\uB9AD\\uD558\\uC138\\uC694!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startGame,\n        children: \"\\uAC8C\\uC784 \\uC2DC\\uC791\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this), gameActive && timeLeft > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          top: '10px',\n          left: '10px',\n          fontSize: '18px'\n        },\n        children: [\"\\uB0A8\\uC740 \\uC2DC\\uAC04: \", timeLeft, \"s\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          top: '10px',\n          right: '10px',\n          fontSize: '18px'\n        },\n        children: [\"\\uC810\\uC218: \", score]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: targetRef,\n        className: \"target\",\n        onClick: handleClickTarget,\n        style: {\n          position: 'absolute',\n          width: '50px',\n          height: '50px',\n          borderRadius: '50%',\n          background: 'red'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), gameActive && timeLeft === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        marginTop: '100px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uAC8C\\uC784 \\uC885\\uB8CC!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\uC810\\uC218: \", score]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/aquarium'),\n        children: \"\\uC5B4\\uD56D\\uC73C\\uB85C \\uB3CC\\uC544\\uAC00\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n_s(MiniGame, \"asSvZ5jSwNjOMY3uXRsyZ8vOmPc=\", false, function () {\n  return [useNavigate];\n});\n_c = MiniGame;\nvar _c;\n$RefreshReg$(_c, \"MiniGame\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","MiniGame","token","_s","score","setScore","timeLeft","setTimeLeft","gameActive","setGameActive","targetRef","navigate","moveInterval","timerInterval","setInterval","moveTarget","prev","clearInterval","fetch","method","headers","body","JSON","stringify","name","then","res","json","data","alert","catch","err","console","error","startGame","current","container","parentElement","maxX","offsetWidth","maxY","offsetHeight","newX","Math","floor","random","newY","style","left","top","handleClickTarget","className","position","width","height","background","textAlign","children","marginTop","fileName","_jsxFileName","lineNumber","columnNumber","onClick","fontSize","right","ref","borderRadius","_c","$RefreshReg$"],"sources":["C:/Users/kim22/Downloads/my-ocean-app/client/src/components/MiniGame.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport default function MiniGame({ token }) {\r\n  const [score, setScore] = useState(0);\r\n  const [timeLeft, setTimeLeft] = useState(10);\r\n  const [gameActive, setGameActive] = useState(false);\r\n  const targetRef = useRef(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    let moveInterval;\r\n    let timerInterval;\r\n    if (gameActive && timeLeft > 0) {\r\n      // Move target every 800ms\r\n      moveInterval = setInterval(() => {\r\n        moveTarget();\r\n      }, 800);\r\n      // Countdown timer\r\n      timerInterval = setInterval(() => {\r\n        setTimeLeft(prev => prev > 0 ? prev - 1 : 0);\r\n      }, 1000);\r\n    }\r\n    if (timeLeft === 0) {\r\n      // Game over\r\n      clearInterval(moveInterval);\r\n      clearInterval(timerInterval);\r\n      // If score high enough, reward item\r\n      if (score >= 5) {\r\n        fetch('/api/items', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`\r\n          },\r\n          body: JSON.stringify({ name: 'Shell' })\r\n        })\r\n          .then(res => res.json())\r\n          .then(data => {\r\n            alert('축하합니다! 새로운 아이템을 획득했습니다!');\r\n          })\r\n          .catch(err => console.error('Item reward error:', err));\r\n      } else {\r\n        alert('다음 기회에...');\r\n      }\r\n    }\r\n    return () => {\r\n      clearInterval(moveInterval);\r\n      clearInterval(timerInterval);\r\n    };\r\n  }, [gameActive, timeLeft]);\r\n\r\n  const startGame = () => {\r\n    setScore(0);\r\n    setTimeLeft(10);\r\n    setGameActive(true);\r\n    moveTarget();\r\n  };\r\n\r\n  const moveTarget = () => {\r\n    if (targetRef.current) {\r\n      const container = targetRef.current.parentElement;\r\n      const maxX = container.offsetWidth - 50; // target size 50px\r\n      const maxY = container.offsetHeight - 50;\r\n      const newX = Math.floor(Math.random() * maxX);\r\n      const newY = Math.floor(Math.random() * maxY);\r\n      targetRef.current.style.left = newX + 'px';\r\n      targetRef.current.style.top = newY + 'px';\r\n    }\r\n  };\r\n\r\n  const handleClickTarget = () => {\r\n    if (!gameActive) return;\r\n    setScore(prev => prev + 1);\r\n    // move target immediately on click for faster gameplay\r\n    moveTarget();\r\n  };\r\n\r\n  return (\r\n    <div className=\"mini-game-container\" style={{ position: 'relative', width: '100%', height: '100%', background: '#eef', textAlign: 'center' }}>\r\n      {!gameActive && (\r\n        <div style={{ marginTop: '100px' }}>\r\n          <h2>미니게임 시작</h2>\r\n          <p>10초 안에 가능한 많이 클릭하세요!</p>\r\n          <button onClick={startGame}>게임 시작</button>\r\n        </div>\r\n      )}\r\n      {gameActive && timeLeft > 0 && (\r\n        <>\r\n          <div style={{ position: 'absolute', top: '10px', left: '10px', fontSize: '18px' }}>남은 시간: {timeLeft}s</div>\r\n          <div style={{ position: 'absolute', top: '10px', right: '10px', fontSize: '18px' }}>점수: {score}</div>\r\n          <div\r\n            ref={targetRef}\r\n            className=\"target\"\r\n            onClick={handleClickTarget}\r\n            style={{ position: 'absolute', width: '50px', height: '50px', borderRadius: '50%', background: 'red' }}>\r\n          </div>\r\n        </>\r\n      )}\r\n      {gameActive && timeLeft === 0 && (\r\n        <div style={{ textAlign: 'center', marginTop: '100px' }}>\r\n          <h2>게임 종료!</h2>\r\n          <p>점수: {score}</p>\r\n          <button onClick={() => navigate('/aquarium')}>어항으로 돌아가기</button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}